{
  "hash": "bd61e958237508fefdc5bec0b600450b",
  "result": {
    "markdown": "---\ntitle: \"20 Time on the Horizon: ggHoriPlot methods\"\nsubtitle: Hands-On Exercise for Week 7\ndate: last-modified\nauthor: \"KB\"\neditor: visual\nexecute:\n  freeze: auto \n  warning: false\nformat:\n  html:\n    code-fold: true\n    code-summary: \"Show the code\"\n    code-line-numbers: true\n    toc-depth: 4\n---\n\n\n(First Published: Jul 5, 2023)\n\n## 20.1 Learning Outcome\n\nWe will learn how to create a Horizon Graph.\n\nA horizon graph is an analytical graphical method specially designed for visualising large numbers of time-series. It aims to overcome the issue of visualising highly overlapping time-series as shown in the figure below.\n\n![](images/paste-4FFFA726.png)\n\nA horizon graph essentially an area chart that has been split into slices and the slices then layered on top of one another with the areas representing the highest (absolute) values on top. Each slice has a greater intensity of colour based on the absolute value it represents.\n\n![](images/paste-83E8DE34.png)\n\n::: callout-tip\n## Tip\n\nBefore getting started, do visit [Getting Started](https://rivasiker.github.io/ggHoriPlot/articles/ggHoriPlot.html) to learn more about the functions of ggHoriPlot package. Next, read [`geom_horizon()`](https://rivasiker.github.io/ggHoriPlot/reference/geom_horizon.html) to learn more about the usage of its arguments.\n:::\n\n## 20.2 Getting Started\n\n### 20.2.1 Install and load the required R libraries\n\nInstall and load the the required R packages. The name and function of the new package that will be used for this exercise is as follow:\n\n-   **ggHoriPlot** : allows building horizon plots in ggplot2\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(ggHoriPlot, ggthemes, tidyverse)\n```\n:::\n\n\n### 20.2.2 Import the Data\n\nThe [Average Retail Prices Of Selected Consumer Items](https://tablebuilder.singstat.gov.sg/table/TS/M212891) data will be used.\n\n\n::: {.cell}\n\n```{.r .cell-code}\naverp <- read_csv(\"data/AVERP.csv\", show_col_types = F) %>%\n  mutate(`Date` = dmy(`Date`))\n```\n:::\n\n\n::: callout-note\n## Things to note:\n\nBy default, read_csv will import data in Date field as Character data type. [`dmy()`](https://lubridate.tidyverse.org/reference/ymd.html) of [**lubridate**](https://lubridate.tidyverse.org/) package, which is a part of **tidyverse**, to parse the Date field into the Date data type in R.\n:::\n\n### 20.2.3 Plotting the Horizon Graph\n\nThe codes below are used to plot the horizon graph.\n\n\n::: {.cell}\n\n```{.r .cell-code}\naverp %>% \n  filter(Date >= \"2018-01-01\") %>%\n  ggplot() +\n  geom_horizon(aes(x = Date, y=Values), \n               origin = \"midpoint\", \n               horizonscale = 6)+\n  facet_grid(`Consumer Items`~.) +\n    theme_few() +\n  scale_fill_hcl(palette = 'RdBu') +\n  theme(panel.spacing.y=unit(0, \"lines\"), strip.text.y = element_text(\n    size = 5, angle = 0, hjust = 0),\n    legend.position = 'none',\n    axis.text.y = element_blank(),\n    axis.text.x = element_text(size=7),\n    axis.title.y = element_blank(),\n    axis.title.x = element_blank(),\n    axis.ticks.y = element_blank(),\n    panel.border = element_blank()\n    ) +\n    scale_x_date(expand=c(0,0), date_breaks = \"3 month\", date_labels = \"%b%y\") +\n  ggtitle('Average Retail Prices of Selected Consumer Items (Jan 2018 to Dec 2022)')\n```\n\n::: {.cell-output-display}\n![](Hands-On_Ex7b_files/figure-html/unnamed-chunk-3-1.png){width=768}\n:::\n:::\n\n\n::: callout-tip\n## Tip\n\nThe red portion of the plot indicates a decline in value while the blue portion denotes an increase in value. The intensity of the red and blue tone signifies the magnitude of decline or increase.\n:::\n\n::: {style=\"text-align: center\"}\n$**That's$ $all$ $folks!**$\n:::\n",
    "supporting": [
      "Hands-On_Ex7b_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}